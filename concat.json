{
    "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
    "title": { "text": "Deaths in Males and Females due to Ischaemic Heart disease 2010-2020", "size":"20"},
    "data": {
        "url": "https://raw.githubusercontent.com/RogueTrader7/Visulaisation2/main/concat.csv"
    },

    "transform": [
        {"filter": "datum.males > 0"},
        
        {
         "calculate": " datum['males'] +' died of Ischaemic heart disease(2017).'",
         "as": "text_annotation"
         }
        ],

        
    "width": "container",
    "height": "container",
    "hconcat": [{
            "width": "150",
            "height": "100",
            "mark": "area",
            "encoding": {
            "x": {
                  "field": "Year",
                    "type": "temporal"
                  },
            "y": {
              "field": "males",
              "type": "quantitative",
              "axis": {"tickCount": 3, "grid": false} },
              "tooltip":[{"field": "Year", "type": "temporal"},
              {"field": "males", "type": "quantitative"}]

            },
                   
            "layer": [
                           {
                           "mark":{
                           "type":"area"}
                       },
                       {"transform": [
                        {
                           "window": [{
                           "op": "rank",
                           "as": "rank"
                       }],
                       "sort": [{ "field": "males", "order": "descending" }]
                       }, {
                       "filter": "datum.rank <= 1"
                           }
                   ],
                    "encoding": {
               "x": {
                   "field": "males",
                   "type": "quantitative"
               },
                   "y": {
                    "field": "Year",
                   "type": "temporal",
           "sort": {"field": "males","op":"average", "order":"descending"}
               }
           
               },
               "mark": {"type": "text", "align": "right", "dx": 3, "size":"10"},
               "encoding": {"text": {"field": "text_annotation"}
           }  
           }]},
       
            
        {
            "width": "150",
            "height": "100",
            "mark": "area",
            "encoding": {
                "x": {
                    "field": "Year",
                    "type": "temporal",

                    "axis": {
                        "title": "Year"
                    }

                },
                "y": {
                    "field": "females",
                    "type": "quantitative"

                },
                "tooltip":[{"field": "Year", "type": "temporal"},
                {"field": "females", "type": "quantitative"}],
                "color": { "value": "firebrick" }
                

            }
        }
    ]

}